<div id="resource-document-panel">

  <mat-toolbar class="mat-elevation-z2" style="min-height: 50px !important;">
    <mat-toolbar-row class="smp-toolbar-row"
                     style="justify-content: space-between;min-height: 50px !important;">
      <button id="newVersion_id" mat-raised-button
              color="primary"
              matTooltip="{{ 'resource.document.panel.tooltip.version.new' | translate }}"
              [disabled]="emptyDocument"
              (click)="onNewDocumentVersionButtonClicked()">
        <mat-icon>add_circle</mat-icon>
        <span>{{ "resource.document.panel.button.version.new" | translate }}</span>
      </button>
      <button id="validateResource_id" mat-raised-button
              color="primary"
              matTooltip="{{ 'resource.document.panel.tooltip.validate' | translate }}"
              [disabled]="emptyDocument"
              (click)="onDocumentValidateButtonClicked()">
        <mat-icon>check_circle</mat-icon>
        <span>{{ "resource.document.panel.button.validate" | translate }}</span>
      </button>
      <button id="GenerateResource_id" mat-raised-button
              color="primary"
              [disabled]="!documentEditable"
              matTooltip="{{ 'resource.document.panel.tooltip.generate' | translate }}"
              (click)="onGenerateButtonClicked()">
        <mat-icon>change_circle</mat-icon>
        <span>{{ "resource.document.panel.button.generate" | translate }}</span>
      </button>
      <button id="documentWizard_id" mat-raised-button
              color="primary"
              matTooltip="{{ 'resource.document.panel.tooltip.document.wizard' | translate }}"
              [disabled]="!documentEditable"
              *ngIf="showWizardDialog"
              (click)="onShowDocumentWizardDialog()">
        <mat-icon>code_block</mat-icon>
        <span>{{ "resource.document.panel.button.document.wizard" | translate }}</span>
      </button>
      <span style="flex: 1 1 auto;"></span>
    </mat-toolbar-row>
  </mat-toolbar>

  <div class="panel" [formGroup]="documentForm"
       style="display: flex;flex-direction: row;flex-grow: 1; ">
    <div
      style="display:flex; overflow: auto;flex: 2;align-self: stretch; flex-direction: column;">

      <div style="display: flex;flex-direction: row">
        <mat-form-field style="min-width: 140px"
                        subscriptSizing="dynamic"
                        appearance="fill"
        >
          <mat-label>{{ "resource.document.panel.label.selected.version" | translate }}</mat-label>
          <mat-select
            placeholder="{{ 'resource.document.panel.placeholder.version' | translate }}"
            matTooltip="{{ 'resource.document.panel.tooltip.version' | translate }}"
            id="document-version_id"
            formControlName="payloadVersion"
            (selectionChange)="onSelectionDocumentVersionChanged()">
            <mat-option *ngFor="let version of getDocumentVersions"
                        [value]="version">
              {{ version }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field style="min-width: 180px"
                        subscriptSizing="dynamic"
                        appearance="fill">
          <mat-label>{{ "resource.document.panel.label.selected.status" | translate }}</mat-label>
          <input matInput id="status_id"
                 formControlName="documentVersionStatus"
                 readonly>
        </mat-form-field>
        <mat-form-field style="width:100%"
                        subscriptSizing="dynamic"
                        appearance="fill">
          <mat-label>{{ "resource.document.panel.label.selected.created.on" | translate }}</mat-label>
          <input id="payloadCreatedOn_id"
                 matInput [ngxMatDatetimePicker]="payloadCreatedOnPicker"
                 formControlName="payloadCreatedOn"
                 readonly>
          <mat-datepicker-toggle matSuffix [for]="payloadCreatedOnPicker"
                                 style="visibility: hidden"></mat-datepicker-toggle>
          <ngx-mat-datetime-picker #payloadCreatedOnPicker [showSpinners]="true"
                                   [showSeconds]="false"
                                   [hideTime]="false"></ngx-mat-datetime-picker>
        </mat-form-field>
      </div>
      <div
        style="display:block; overflow: auto;flex: 2;align-self: stretch; flex-direction: column;border: ridge 3px #b0bec5"
        (click)="onEditPanelClick()">
        <smp-editor #smpDocumentEditor formControlName="payload"
                    ngDefaultControl></smp-editor>

      </div>
      <smp-warning-panel *ngIf="!documentEditable"
                         icon="info"
                         type="desc"
                         [label]="'resource.document.panel.note.editable' | translate: { editableDocStatusList: editableDocStatusList }">
      </smp-warning-panel>
    </div>
    <expandable-panel>
      <expandable-item icon="settings"
                       title="{{'document.properties.panel.tab.title' | translate }}"
                       buttonLabel="{{'document.properties.panel.tab.button.properties' | translate }}">
        <document-properties-panel formControlName="properties"
                                   ngDefaultControl></document-properties-panel>
      </expandable-item>
      <expandable-item icon="list"
                       title="{{'document.versions.panel.tab.title' | translate }}"
                       buttonLabel="{{'document.versions.panel.tab.button.versions' | translate }}">
        <document-versions-panel formControlName="documentVersions"
                                 ngDefaultControl></document-versions-panel>
      </expandable-item>
      <expandable-item icon="event"
                       title="{{'document.events.panel.tab.title' | translate }}"
                       buttonLabel="{{'document.events.panel.tab.button.events' | translate }}">
        <document-events-panel formControlName="documentVersionEvents"
                               ngDefaultControl></document-events-panel>
      </expandable-item>
    </expandable-panel>
  </div>

  <mat-toolbar class="mat-elevation-z2"
               style="flex-grow: 0;">
    <mat-toolbar-row class="smp-toolbar-row">
      <button id="back_id" mat-raised-button color="primary"
              (click)="onBackButtonClicked()">
        <mat-icon>arrow_circle_left</mat-icon>
        <span>{{ "resource.document.panel.button.back" | translate }}</span>
      </button>
      <button id="cancel_id" mat-raised-button color="primary"
              [disabled]="cancelButtonDisabled"
              (click)="onDocumentResetButtonClicked()">
        <mat-icon>cancel</mat-icon>
        <span>{{ "resource.document.panel.button.cancel" | translate }}</span>
      </button>
      <tool-button-spacer></tool-button-spacer>
      <button id="saveResource_id" mat-raised-button
              color="primary"
              matTooltip="{{ 'resource.document.panel.tooltip.save' | translate }}"
              [disabled]="saveButtonDisabled"
              (click)="onSaveButtonClicked()">
        <mat-icon>save</mat-icon>
        <span>{{ "resource.document.panel.button.save" | translate }}</span>
      </button>
      <button *ngIf="reviewEnabled" id="reviewResource_id" mat-raised-button
              color="primary"
              matTooltip="{{ 'resource.document.panel.tooltip.version.review' | translate }}"
              [disabled]="reviewButtonDisabled"
              (click)="onReviewButtonClicked()">
        <mat-icon>task</mat-icon>
        <span>{{ "resource.document.panel.button.version.review" | translate }}</span>
      </button>
      <button id="publishResource_id" mat-raised-button
              color="primary"
              matTooltip="{{ 'resource.document.panel.tooltip.version.publish' | translate }}"
              [disabled]="publishButtonDisabled"
              (click)="onPublishButtonClicked()">
        <mat-icon>publish</mat-icon>
        <span>{{ "resource.document.panel.button.version.publish" | translate }}</span>
      </button>
      <button *ngIf="!reviewActionButtonDisabled" id="approveResource_id"
              mat-raised-button
              color="primary"
              matTooltip="{{ 'resource.document.panel.tooltip.version.approve' | translate }}"
              [disabled]="reviewActionButtonDisabled"
              (click)="onApproveButtonClicked()">
        <mat-icon>check_circle</mat-icon>
        <span>{{ "resource.document.panel.button.version.approve" | translate }}</span>
      </button>
      <button *ngIf="!reviewActionButtonDisabled" id="rejectResource_id"
              mat-raised-button
              color="primary"
              matTooltip="{{ 'resource.document.panel.tooltip.version.reject' | translate }}"
              [disabled]="reviewActionButtonDisabled"
              (click)="onRejectButtonClicked()">
        <mat-icon>unpublished</mat-icon>
        <span>{{ "resource.document.panel.button.version.reject" | translate }}</span>
      </button>
    </mat-toolbar-row>
  </mat-toolbar>
</div>
